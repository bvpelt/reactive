<!DOCTYPE html>
<html lang="en" th:replace="~{layout :: html(~{::title}, ~{::div})}"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Customers - Customer Order Management</title>
</head>
<body>
<div>
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2><i class="fas fa-users text-primary"></i> Customers</h2>
        <a class="btn btn-primary" href="/customers/new">
            <i class="fas fa-plus"></i> Add New Customer
        </a>
    </div>

    <div class="card">
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-hover">
                    <thead>
                    <tr>
                        <th><i class="fas fa-user"></i> Name</th>
                        <th><i class="fas fa-envelope"></i> Email</th>
                        <th><i class="fas fa-phone"></i> Phone</th>
                        <th><i class="fas fa-map-marker-alt"></i> Address</th>
                        <th><i class="fas fa-cog"></i> Actions</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="customer : ${customers}">
                        <td>
                            <strong th:text="${customer.name}"></strong>
                        </td>
                        <td th:text="${customer.email}"></td>
                        <td th:text="${customer.phone}"></td>
                        <td th:text="${customer.address}"></td>
                        <td>
                            <div class="btn-group" role="group">
                                <a class="btn btn-sm btn-outline-primary"
                                   th:href="@{/customers/edit/{id}(id=${customer.id})}" title="Edit Customer">
                                    <i class="fas fa-edit"></i>
                                </a>
                                <a class="btn btn-sm btn-outline-info"
                                   th:href="@{/customers/{id}/orders(id=${customer.id})}" title="View Orders">
                                    <i class="fas fa-shopping-cart"></i>
                                </a>
                                <a class="btn btn-sm btn-outline-success"
                                   th:href="@{/orders/new(customerId=${customer.id})}" title="Add Order">
                                    <i class="fas fa-plus"></i>
                                </a>
                                <a class="btn btn-sm btn-outline-danger"
                                   onclick="return confirm('Are you sure you want to delete this customer and all their orders?')" th:href="@{/customers/delete/{id}(id=${customer.id})}"
                                   title="Delete Customer">
                                    <i class="fas fa-trash"></i>
                                </a>
                            </div>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div class="mt-3">
        <small class="text-muted">
            <i class="fas fa-info-circle"></i>
            Click on the <i class="fas fa-shopping-cart"></i> icon to view a customer's orders,
            or <i class="fas fa-plus"></i> to add a new order for that customer.
        </small>
    </div>
</div>
</body>
</html>
